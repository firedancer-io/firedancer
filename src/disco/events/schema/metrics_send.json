{
    "name": "metrics_send",
    "id": 1022,
    "description": "Metrics snapshot for the send tile",
    "fields": {
        "meta":                         { "type": "ref:MetricMeta" },
        "tile":                         { "type": "ref:MetricTile" },
        "unstaked_ci":                  { "type": "UInt64", "description": "Total number of times we received contact info for an unstaked node" },
        "ci_removed":                   { "type": "UInt64", "description": "Total number of times we removed contact info" },
        "new_contact_info_quic_vote":   {
            "type": "Flatten",
            "description": "Total number of contact infos received and handled for QUIC Vote port",
            "fields": {
                "new_contact_info_quic_vote_unroutable":  { "type": "UInt64", "description": "Skipped (unroutable)" },
                "new_contact_info_quic_vote_initialized": { "type": "UInt64", "description": "Initialized" },
                "new_contact_info_quic_vote_changed":     { "type": "UInt64", "description": "Contact info changed" },
                "new_contact_info_quic_vote_no_change":   { "type": "UInt64", "description": "Contact info unchanged" }
            }
        },
        "new_contact_info_quic_tpu":    {
            "type": "Flatten",
            "description": "Total number of contact infos received and handled for QUIC TPU port",
            "fields": {
                "new_contact_info_quic_tpu_unroutable":  { "type": "UInt64", "description": "Skipped (unroutable)" },
                "new_contact_info_quic_tpu_initialized": { "type": "UInt64", "description": "Initialized" },
                "new_contact_info_quic_tpu_changed":     { "type": "UInt64", "description": "Contact info changed" },
                "new_contact_info_quic_tpu_no_change":   { "type": "UInt64", "description": "Contact info unchanged" }
            }
        },
        "new_contact_info_udp_vote":    {
            "type": "Flatten",
            "description": "Total number of contact infos received and handled for UDP Vote port",
            "fields": {
                "new_contact_info_udp_vote_unroutable":  { "type": "UInt64", "description": "Skipped (unroutable)" },
                "new_contact_info_udp_vote_initialized": { "type": "UInt64", "description": "Initialized" },
                "new_contact_info_udp_vote_changed":     { "type": "UInt64", "description": "Contact info changed" },
                "new_contact_info_udp_vote_no_change":   { "type": "UInt64", "description": "Contact info unchanged" }
            }
        },
        "new_contact_info_udp_tpu":     {
            "type": "Flatten",
            "description": "Total number of contact infos received and handled for UDP TPU port",
            "fields": {
                "new_contact_info_udp_tpu_unroutable":  { "type": "UInt64", "description": "Skipped (unroutable)" },
                "new_contact_info_udp_tpu_initialized": { "type": "UInt64", "description": "Initialized" },
                "new_contact_info_udp_tpu_changed":     { "type": "UInt64", "description": "Contact info changed" },
                "new_contact_info_udp_tpu_no_change":   { "type": "UInt64", "description": "Contact info unchanged" }
            }
        },
        "send_result_quic_vote":        {
            "type": "Flatten",
            "description": "Total count of results from trying to send via QUIC Vote port",
            "fields": {
                "send_result_quic_vote_success":   { "type": "UInt64", "description": "Success" },
                "send_result_quic_vote_no_ci":     { "type": "UInt64", "description": "No contact info" },
                "send_result_quic_vote_no_conn":   { "type": "UInt64", "description": "No QUIC connection" },
                "send_result_quic_vote_no_stream": { "type": "UInt64", "description": "No QUIC stream" }
            }
        },
        "send_result_quic_tpu":         {
            "type": "Flatten",
            "description": "Total count of results from trying to send via QUIC TPU port",
            "fields": {
                "send_result_quic_tpu_success":   { "type": "UInt64", "description": "Success" },
                "send_result_quic_tpu_no_ci":     { "type": "UInt64", "description": "No contact info" },
                "send_result_quic_tpu_no_conn":   { "type": "UInt64", "description": "No QUIC connection" },
                "send_result_quic_tpu_no_stream": { "type": "UInt64", "description": "No QUIC stream" }
            }
        },
        "send_result_udp_vote":         {
            "type": "Flatten",
            "description": "Total count of results from trying to send via UDP Vote port",
            "fields": {
                "send_result_udp_vote_success":   { "type": "UInt64", "description": "Success" },
                "send_result_udp_vote_no_ci":     { "type": "UInt64", "description": "No contact info" },
                "send_result_udp_vote_no_conn":   { "type": "UInt64", "description": "No QUIC connection" },
                "send_result_udp_vote_no_stream": { "type": "UInt64", "description": "No QUIC stream" }
            }
        },
        "send_result_udp_tpu":          {
            "type": "Flatten",
            "description": "Total count of results from trying to send via UDP TPU port",
            "fields": {
                "send_result_udp_tpu_success":   { "type": "UInt64", "description": "Success" },
                "send_result_udp_tpu_no_ci":     { "type": "UInt64", "description": "No contact info" },
                "send_result_udp_tpu_no_conn":   { "type": "UInt64", "description": "No QUIC connection" },
                "send_result_udp_tpu_no_stream": { "type": "UInt64", "description": "No QUIC stream" }
            }
        },
        "ensure_conn_result_quic_vote": {
            "type": "Flatten",
            "description": "Total count of results from trying to ensure a connection for a leader for QUIC Vote port",
            "fields": {
                "ensure_conn_result_quic_vote_no_leader":      { "type": "UInt64", "description": "No QUIC connection" },
                "ensure_conn_result_quic_vote_no_ci":          { "type": "UInt64", "description": "No contact info" },
                "ensure_conn_result_quic_vote_new_connection": { "type": "UInt64", "description": "Initiated connection" },
                "ensure_conn_result_quic_vote_conn_failed":    { "type": "UInt64", "description": "Connection failed" },
                "ensure_conn_result_quic_vote_connected":      { "type": "UInt64", "description": "Connection exists" },
                "ensure_conn_result_quic_vote_cooldown":       { "type": "UInt64", "description": "Connection cooldown" }
            }
        },
        "ensure_conn_result_quic_tpu":  {
            "type": "Flatten",
            "description": "Total count of results from trying to ensure a connection for a leader for QUIC TPU port",
            "fields": {
                "ensure_conn_result_quic_tpu_no_leader":      { "type": "UInt64", "description": "No QUIC connection" },
                "ensure_conn_result_quic_tpu_no_ci":          { "type": "UInt64", "description": "No contact info" },
                "ensure_conn_result_quic_tpu_new_connection": { "type": "UInt64", "description": "Initiated connection" },
                "ensure_conn_result_quic_tpu_conn_failed":    { "type": "UInt64", "description": "Connection failed" },
                "ensure_conn_result_quic_tpu_connected":      { "type": "UInt64", "description": "Connection exists" },
                "ensure_conn_result_quic_tpu_cooldown":       { "type": "UInt64", "description": "Connection cooldown" }
            }
        },
        "handshake_complete":           {
            "type": "Flatten",
            "description": "Total number of times we completed a handshake",
            "fields": {
                "handshake_complete_quic_vote": { "type": "UInt64", "description": "QUIC Vote port" },
                "handshake_complete_quic_tpu":  { "type": "UInt64", "description": "QUIC TPU port" }
            }
        },
        "quic_conn_final":              {
            "type": "Flatten",
            "description": "Total number of times QUIC connection closed",
            "fields": {
                "quic_conn_final_quic_vote": { "type": "UInt64", "description": "QUIC Vote port" },
                "quic_conn_final_quic_tpu":  { "type": "UInt64", "description": "QUIC TPU port" }
            }
        },
        "received_packets":             { "type": "UInt64", "description": "Total count of QUIC packets received" },
        "received_bytes":               { "type": "UInt64", "description": "Total bytes received via QUIC" },
        "sent_packets":                 { "type": "UInt64", "description": "Total count of QUIC packets sent" },
        "sent_bytes":                   { "type": "UInt64", "description": "Total bytes sent via QUIC" },
        "retry_sent":                   { "type": "UInt64", "description": "Total count of QUIC retry packets sent" },
        "connections_alloc":            { "type": "UInt64", "description": "Number of currently allocated QUIC connections" },
        "connections_state":            {
            "type": "Flatten",
            "description": "Number of QUIC connections in each state",
            "fields": {
                "connections_state_invalid":            { "type": "UInt64", "description": "Freed" },
                "connections_state_handshake":          { "type": "UInt64", "description": "Handshaking peer" },
                "connections_state_handshake_complete": { "type": "UInt64", "description": "Handshake complete, confirming with peer" },
                "connections_state_active":             { "type": "UInt64", "description": "Active connection" },
                "connections_state_peer_close":         { "type": "UInt64", "description": "Peer requested close" },
                "connections_state_abort":              { "type": "UInt64", "description": "Connection terminating due to error" },
                "connections_state_close_pending":      { "type": "UInt64", "description": "Connection is closing" },
                "connections_state_dead":               { "type": "UInt64", "description": "Connection about to be freed" }
            }
        },
        "connections_created":          { "type": "UInt64", "description": "Total count of QUIC connections created" },
        "connections_closed":           { "type": "UInt64", "description": "Total count of QUIC connections closed" },
        "connections_aborted":          { "type": "UInt64", "description": "Total count of QUIC connections aborted" },
        "connections_timed_out":        { "type": "UInt64", "description": "Total count of QUIC connections timed out" },
        "connections_retried":          { "type": "UInt64", "description": "Total count of QUIC connections retried" },
        "connection_error_no_slots":    { "type": "UInt64", "description": "Total count of connection errors due to no slots" },
        "connection_error_retry_fail":  { "type": "UInt64", "description": "Total count of connection retry failures" },
        "pkt_crypto_failed":            {
            "type": "Flatten",
            "description": "Total count of packets with crypto failures",
            "fields": {
                "pkt_crypto_failed_initial":   { "type": "UInt64", "description": "Initial" },
                "pkt_crypto_failed_early":     { "type": "UInt64", "description": "Early data" },
                "pkt_crypto_failed_handshake": { "type": "UInt64", "description": "Handshake" },
                "pkt_crypto_failed_app":       { "type": "UInt64", "description": "App data" }
            }
        },
        "pkt_no_key":                   {
            "type": "Flatten",
            "description": "Total count of packets with no key",
            "fields": {
                "pkt_no_key_initial":   { "type": "UInt64", "description": "Initial" },
                "pkt_no_key_early":     { "type": "UInt64", "description": "Early data" },
                "pkt_no_key_handshake": { "type": "UInt64", "description": "Handshake" },
                "pkt_no_key_app":       { "type": "UInt64", "description": "App data" }
            }
        },
        "pkt_no_conn":                  {
            "type": "Flatten",
            "description": "Total count of packets with no connection",
            "fields": {
                "pkt_no_conn_initial":   { "type": "UInt64", "description": "Initial" },
                "pkt_no_conn_retry":     { "type": "UInt64", "description": "Retry" },
                "pkt_no_conn_handshake": { "type": "UInt64", "description": "Handshake" },
                "pkt_no_conn_one_rtt":   { "type": "UInt64", "description": "1-RTT" }
            }
        },
        "pkt_tx_alloc_fail":            { "type": "UInt64", "description": "Total count of packet TX allocation failures" },
        "pkt_net_header_invalid":       { "type": "UInt64", "description": "Total count of packets with invalid network headers" },
        "pkt_quic_header_invalid":      { "type": "UInt64", "description": "Total count of packets with invalid QUIC headers" },
        "pkt_undersz":                  { "type": "UInt64", "description": "Total count of undersized packets" },
        "pkt_oversz":                   { "type": "UInt64", "description": "Total count of oversized packets" },
        "pkt_verneg":                   { "type": "UInt64", "description": "Total count of version negotiation packets" },
        "pkt_retransmissions":          {
            "type": "Flatten",
            "description": "Total count of QUIC packet retransmissions",
            "fields": {
                "pkt_retransmissions_initial":   { "type": "UInt64", "description": "Initial" },
                "pkt_retransmissions_early":     { "type": "UInt64", "description": "Early data" },
                "pkt_retransmissions_handshake": { "type": "UInt64", "description": "Handshake" },
                "pkt_retransmissions_app":       { "type": "UInt64", "description": "App data" }
            }
        },
        "handshakes_created":           { "type": "UInt64", "description": "Total count of QUIC handshakes created" },
        "handshake_error_alloc_fail":   { "type": "UInt64", "description": "Total count of handshake allocation failures" },
        "handshake_evicted":            { "type": "UInt64", "description": "Total count of handshakes evicted" },
        "stream_received_events":       { "type": "UInt64", "description": "Total count of stream events received" },
        "stream_received_bytes":        { "type": "UInt64", "description": "Total bytes received via streams" },
        "received_frames":              {
            "type": "Flatten",
            "description": "Total count of QUIC frames received",
            "fields": {
                "received_frames_unknown":             { "type": "UInt64", "description": "Unknown frame type" },
                "received_frames_ack":                 { "type": "UInt64", "description": "ACK frame" },
                "received_frames_reset_stream":        { "type": "UInt64", "description": "RESET_STREAM frame" },
                "received_frames_stop_sending":        { "type": "UInt64", "description": "STOP_SENDING frame" },
                "received_frames_crypto":              { "type": "UInt64", "description": "CRYPTO frame" },
                "received_frames_new_token":           { "type": "UInt64", "description": "NEW_TOKEN frame" },
                "received_frames_stream":              { "type": "UInt64", "description": "STREAM frame" },
                "received_frames_max_data":            { "type": "UInt64", "description": "MAX_DATA frame" },
                "received_frames_max_stream_data":     { "type": "UInt64", "description": "MAX_STREAM_DATA frame" },
                "received_frames_max_streams":         { "type": "UInt64", "description": "MAX_STREAMS frame" },
                "received_frames_data_blocked":        { "type": "UInt64", "description": "DATA_BLOCKED frame" },
                "received_frames_stream_data_blocked": { "type": "UInt64", "description": "STREAM_DATA_BLOCKED frame" },
                "received_frames_streams_blocked":     { "type": "UInt64", "description": "STREAMS_BLOCKED(bidi) frame" },
                "received_frames_new_conn_id":         { "type": "UInt64", "description": "NEW_CONN_ID frame" },
                "received_frames_retire_conn_id":      { "type": "UInt64", "description": "RETIRE_CONN_ID frame" },
                "received_frames_path_challenge":      { "type": "UInt64", "description": "PATH_CHALLENGE frame" },
                "received_frames_path_response":       { "type": "UInt64", "description": "PATH_RESPONSE frame" },
                "received_frames_conn_close_quic":     { "type": "UInt64", "description": "CONN_CLOSE(transport) frame" },
                "received_frames_conn_close_app":      { "type": "UInt64", "description": "CONN_CLOSE(app) frame" },
                "received_frames_handshake_done":      { "type": "UInt64", "description": "HANDSHAKE_DONE frame" },
                "received_frames_ping":                { "type": "UInt64", "description": "PING frame" },
                "received_frames_padding":             { "type": "UInt64", "description": "PADDING frame" }
            }
        },
        "frame_fail_parse":             { "type": "UInt64", "description": "Total count of frame parse failures" },
        "frame_tx_alloc":               {
            "type": "Flatten",
            "description": "Results of attempts to acquire QUIC frame metadata",
            "fields": {
                "frame_tx_alloc_success":         { "type": "UInt64", "description": "Success" },
                "frame_tx_alloc_fail_empty_pool": { "type": "UInt64", "description": "PktMetaPoolEmpty" },
                "frame_tx_alloc_fail_conn_max":   { "type": "UInt64", "description": "ConnMaxedInflightFrames" }
            }
        },
        "ack_tx":                       {
            "type": "Flatten",
            "description": "Total count of ACK frames transmitted",
            "fields": {
                "ack_tx_noop":   { "type": "UInt64", "description": "Non-ACK-eliciting packet" },
                "ack_tx_new":    { "type": "UInt64", "description": "New ACK range" },
                "ack_tx_merged": { "type": "UInt64", "description": "Merged into existing ACK range" },
                "ack_tx_drop":   { "type": "UInt64", "description": "Out of buffers" },
                "ack_tx_cancel": { "type": "UInt64", "description": "ACK suppressed by handler" }
            }
        }
    }
}
